function cdp_cdp(){function e(e,t){var n,o,i,r,s,a,c,l;for(n=3&e.length,o=e.length-n,i=t,s=3432918353,a=461845907,l=0;l<o;)c=255&e.charCodeAt(l)|(255&e.charCodeAt(++l))<<8|(255&e.charCodeAt(++l))<<16|(255&e.charCodeAt(++l))<<24,++l,c=(65535&c)*s+(((c>>>16)*s&65535)<<16)&4294967295,c=c<<15|c>>>17,c=(65535&c)*a+(((c>>>16)*a&65535)<<16)&4294967295,i^=c,i=i<<13|i>>>19,r=5*(65535&i)+((5*(i>>>16)&65535)<<16)&4294967295,i=27492+(65535&r)+((58964+(r>>>16)&65535)<<16);switch(c=0,n){case 3:c^=(255&e.charCodeAt(l+2))<<16;case 2:c^=(255&e.charCodeAt(l+1))<<8;case 1:c^=255&e.charCodeAt(l),c=(65535&c)*s+(((c>>>16)*s&65535)<<16)&4294967295,c=c<<15|c>>>17,c=(65535&c)*a+(((c>>>16)*a&65535)<<16)&4294967295,i^=c}return i^=e.length,i^=i>>>16,i=2246822507*(65535&i)+((2246822507*(i>>>16)&65535)<<16)&4294967295,i^=i>>>13,i=3266489909*(65535&i)+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}this.deviceId,this.deviceType,this.eventTime,this.dName,this.sdkVersion="1.0",this.screenAlias=screen,this.documentAlias=document,this.navigatorAlias=navigator,this.windowAlias=window,this.fingerprint,this.baseUrl="https://fnp-cdp.fnpplus.com/";var t=this,n=function(e){var t,n,o=performance.now();t=Array.prototype.forEach,n=Array.prototype.map,this.each=function(e,n,o){if(null!==e)if(t&&e.forEach===t)e.forEach(n,o);else if(e.length===+e.length){for(var i=0,r=e.length;i<r;i++)if(n.call(o,e[i],i,e)==={})return}else for(var s in e)if(e.hasOwnProperty(s)&&n.call(o,e[s],s,e)==={})return},this.map=function(e,t,o){var i=[];return null==e?i:n&&e.map===n?e.map(t,o):(this.each(e,function(e,n,r){i[i.length]=t.call(o,e,n,r)}),i)},"object"==typeof e&&(console.log(e),this.canvas=e.canvas);var i=performance.now();console.log("Call to get Fingerprint took "+(i-o)+" milliseconds.")};n.prototype={get:function(){var t=[];return t.push("Mozilla/5.0 (en-us) AppleWebKit/534.14 (KHTML, like Gecko; Google Wireless Transcoder) Chrome/9.0.597 Safari/534.14 wimb_monitor.py/1.0"),t.push(navigator.language),t.push(screen.colorDepth),t.push(this.getScreenResolution().join("x")),t.push((new Date).getTimezoneOffset()),t.push(this.hasSessionStorage()),t.push(this.hasLocalStorage()),t.push(this.hasIndexDb()),document.body?t.push(typeof document.body.addBehavior):t.push("undefined"),t.push(typeof window.openDatabase),t.push(navigator.cpuClass),t.push(navigator.platform),t.push(navigator.doNotTrack),t.push(this.getPluginsString()),this.canvas&&this.isCanvasSupported()&&t.push(this.getCanvasFingerprint()),console.log(t),e(t.join("###"),31)},hasLocalStorage:function(){try{return!!window.localStorage}catch(e){return!0}},hasSessionStorage:function(){try{return!!window.sessionStorage}catch(e){return!0}},hasIndexDb:function(){try{return!!window.indexedDB}catch(e){return!0}},isCanvasSupported:function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},isIE:function(){return"Microsoft Internet Explorer"===navigator.appName||!("Netscape"!==navigator.appName||!/Trident/.test(navigator.userAgent))},getPluginsString:function(){return this.isIE()?this.getIEPluginsString():this.getRegularPluginsString()},getRegularPluginsString:function(){return this.map(navigator.plugins,function(e){var t=this.map(e,function(e){return[e.type,e.suffixes].join("~")}).join(",");return[e.name,e.description,t].join("::")},this).join(";")},getIEPluginsString:function(){if(window.ActiveXObject){var e=["ShockwaveFlash.ShockwaveFlash","AcroPDF.PDF","PDF.PdfCtrl","QuickTime.QuickTime","rmocx.RealPlayer G2 Control","rmocx.RealPlayer G2 Control.1","RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)","RealVideo.RealVideo(tm) ActiveX Control (32-bit)","RealPlayer","SWCtl.SWCtl","WMPlayer.OCX","AgControl.AgControl","Skype.Detection"];return this.map(e,function(e){try{return new ActiveXObject(e),e}catch(e){return null}}).join(";")}return""},getScreenResolution:function(){return screen.height>screen.width?[screen.height,screen.width]:[screen.width,screen.height]},getCanvasFingerprint:function(){var e=document.createElement("canvas"),t=e.getContext("2d"),n="CANVAS_FINGERPRINT";return t.textBaseline="top",t.font="14px 'Arial'",t.textBaseline="alphabetic",t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.fillText(n,2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(n,4,17),e.toDataURL()}},window.addEventListener("load",function(e){console.log("loaded"),cdp.setDeviceId(),cdp.widget(),cdp.click(),cdp.browserFingerprint(),cdp.menuClick(),cdp.sortByChange(),cdp.sortByClick()}),this.cdp={setDeviceId:function(){console.log("cdp tracker started...");var e=cdp.getCookie("DEVICEID");if(null==e||"undefined"==e||""==e){var n=cdp.userJsonConstruct("registrationee");let e=n.common;console.log("device json",e);cdp.dataPostRequest(t.baseUrl+"id",JSON.stringify(e))}},getDeviceType:function(){var e=navigator.userAgent||navigator.vendor;return(e.match(/iPhone/i)||e.match(/Android/i))&&screen.width<768?"Mobile":e.match(/ipad/i)&&screen.width>=768&&screen.width<=1024?"Tablet":"Desktop"},getDomain:function(){for(var e=0,t=document.domain,n=t.split("."),o="_gd"+(new Date).getTime();e<n.length-1&&document.cookie.indexOf(o+"="+o)==-1;)t=n.slice(-1-++e).join(".");return t},getCookie:function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie),o=n.split(";"),i=0;i<o.length;i++){for(var r=o[i];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""},setCookie:function(e,t,n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);var i="expires="+o.toUTCString();document.cookie=e+"="+t+";"+i+";path=/"},userJsonConstruct:function(e){return{common:{ename:e,dname:cdp.getDomain(),dev:{dId:cdp.getCookie("DEVICEID"),ua:t.navigatorAlias.userAgent,blang:navigator.language||navigator.userLanguage,ver:t.sdkVersion,dtype:cdp.getDeviceType(),appos:cdp.getDeviceOs()},user:{id:cdp.getCookie("faul"),cur:cdp.getCookie("localCurrency")},fngId:cdp.browserFingerprint(),pgloc:{from:t.documentAlias.referrer,to:t.windowAlias.location.href,clikd:cdp.getCookie("widget")}}}},getDeviceOs:function(){var e=window.navigator.userAgent,t=window.navigator.platform,n=["Macintosh","MacIntel","MacPPC","Mac68K"],o=["Win32","Win64","Windows","WinCE"],i=["iPhone","iPad","iPod"],r=null;return n.indexOf(t)!==-1?r="Mac OS":i.indexOf(t)!==-1?r="iOS":o.indexOf(t)!==-1?r="Windows":/Android/.test(e)?r="Android":!r&&/Linux/.test(t)&&(r="Linux"),r},dataPostRequest:function(e,n){return new Promise(function(o,i){try{var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4==r.readyState&&200==r.status){var e=r.responseText;let n=cdp.getCookie("DEVICEID");!n&&e&&(cdp.setCookie("DEVICEID",e,4e5),t.deviceId=e)}else if(4==r.readyState&&200!==r.status){var e=r.responseText;cdp.errorLogPost(n,r.status,r.responseText)}},r.open("POST",e,!1),r.setRequestHeader("Content-type","application/json"),r.send(n)}catch(e){cdp.errorLogPost(n,r.err.err)}})},dataGetRequest:function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4==t.readyState&&200==t.status&&console.log(t.responseText)},t.open("GET",e,!0),t.send()},errorLogPost:function(e,n,o){var i=new XMLHttpRequest,r={responseText:o,status:n,data:e};i.open("POST",t.baseUrl+"errorPost/",!0),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(r))},browserFingerprint:function(e){return new n({canvas:!0}).get()},widget:function(){var e={widg:{}};console.log("on load event fired");let n=document.getElementsByClassName("cdp"),o=Array.prototype.slice.call(n);o.length>0&&o.forEach((n,o)=>{var i=[];if(n.dataset.wdgtinfo){var r=n.dataset.wdgtinfo.split("~");if("occasion"!==r[1].toLowerCase()){e.widg.tyCat=r[0]||"",e.widg.tyNam=r[1]||"",e.widg.wdpos=r[2]||"";var s=n.querySelectorAll("[data-wdgt]");if(s.length>0){s.forEach((e,t)=>{var n={};let o=e.dataset.wdgt.split("~");n.id=o[0]||"",n.pri=o[1]||"",n.pos=o[2]||"",n.label=o[3]||"",n.freeflow=o[4]||"",i.push(n)}),e.widg.attr=i,common=cdp.userJsonConstruct(),common.common.ename="pageload",common.common.pgloc.clikd=cdp.getCookie("widget"),Object.assign(common,e);var a=common;console.log("final json",a),cdp.dataPostRequest(t.baseUrl+"event",JSON.stringify(a))}}}})},click:function(){var e=document.querySelectorAll("[data-wdgt]");e=Array.prototype.slice.call(e);var n=document.querySelectorAll("[data-plp]");n=Array.prototype.slice.call(n),n.length>0&&n.forEach(e=>{var n={item:{}};e.addEventListener("click",function(e){let o=e.currentTarget.closest(".cdp");if(o.dataset.wdgtinfo){let i=o.dataset.wdgtinfo.split("~");n.item.tyCat=i[0]||"",n.item.tyNam=i[1]||"",n.item.wdpos=i[2]||"";let r=e.currentTarget.dataset.plp.split("~");n.item.id=r[0],n.item.pri=r[1],n.item.pos=r[2],n.item.label=r[3],n.item.grid=r[4],n.item.freeflow=r[5];let s=cdp.userJsonConstruct();s.common.ename="clickevent",cdp.setCookie("widget",i[1],694444e-9),s.common.pgloc.clikd=i[1],Object.assign(s,n);let a=s;console.log("final json",a);cdp.dataPostRequest(t.baseUrl+"event",JSON.stringify(a))}})}),e.length>0&&e.forEach(e=>{const n={item:{}};var o={occasion:{}};if("true"!==e.getAttribute("listener")){let i=e.getAttribute("listener");console.log(i),e.addEventListener("click",function(e){console.log("e",e);let i=e.currentTarget.closest(".cdp");if(i.dataset.wdgtinfo){let r=i.dataset.wdgtinfo.split("~");if("menu"==r[0].toLowerCase()){o.tyCat=r[0]||"",o.tyNam=r[1]||"",o.wdpos=r[2]||"";let t=e.currentTarget.dataset.wdgt.split("~");o.occasion.from=t[0]||"",o.occasion.name=t[1]||"",o.occasion.position=t[2]||"",console.log(o)}else{n.item.tyCat=r[0]||"",n.item.tyNam=r[1]||"",n.item.wdpos=r[2]||"";let t=e.currentTarget.dataset.wdgt.split("~");n.item.id=t[0],n.item.pri=t[1],n.item.pos=t[2],n.item.label=t[3],n.item.freeflow=t[4]}let s=cdp.userJsonConstruct();s.common.ename="clickevent",cdp.setCookie("widget",r[1],694444e-9),s.common.pgloc.clikd=r[1],"menu"==r[0].toLowerCase()?Object.assign(s,o):Object.assign(s,n);let a=s;console.log("final json",a);cdp.dataPostRequest(t.baseUrl+"event",JSON.stringify(a))}})}})},menuClick:function(){var e={menu:{name:String,position:Number||"",submenu:{position:Number||"",name:String||""}}},n=document.querySelectorAll("[data-navMenu]"),o=document.querySelectorAll("[data-sbNavMenu]");n.forEach(t=>{t.addEventListener("mouseover",function(t){let n=t.currentTarget.dataset.navmenu.split("~");e.menu.name=n[0],e.menu.position=n[1]})}),n.forEach(n=>{n.addEventListener("click",function(n){let o=n.currentTarget.dataset.navmenu.split("~");e.menu.name=o[0],e.menu.position=o[1];let i=cdp.userJsonConstruct();Object.assign(i,e);let r=i;cdp.dataPostRequest(t.baseUrl+"event",JSON.stringify(r))})}),o.forEach(n=>{n.addEventListener("click",function(n){let o=n.currentTarget.dataset.sbnavmenu.split("~");console.log("sub menu",o),e.menu.submenu.position=o[1],e.menu.submenu.name=o[2];let i=cdp.userJsonConstruct();Object.assign(i,e);let r=i;cdp.dataPostRequest(t.baseUrl+"event",JSON.stringify(r))})})},sortByChange:function(){document.querySelectorAll("[data-sortsel]").forEach((e,n)=>{if(0==n){const n={sortby:{}};let o=e.closest("select");o.addEventListener("change",function(e){let o=e.currentTarget.value;n.sortby=o,console.log("sort by clicked",o,e);let i=cdp.userJsonConstruct();Object.assign(i,n);let r=i;cdp.dataPostRequest(t.baseUrl+"event",JSON.stringify(r))})}})},sortByClick:function(){document.querySelectorAll("[data-sortsel]").forEach(e=>{const n={sortby:{}};e.addEventListener("click",function(e){let o=e.currentTarget.dataset.sortsel;n.sortby=o,console.log("sort by clicked",o,e);let i=cdp.userJsonConstruct();Object.assign(i,n);let r=i;console.log("final json",r),cdp.dataPostRequest(t.baseUrl+"event",JSON.stringify(r))})})},findGift:function(e,n,o,i){var r={fdgift:{occtype:e||"",gftype:n||"",date:o||"",city:i||""}};let s=cdp.userJsonConstruct();Object.assign(s,r);let a=s;console.log("final json",a),cdp.dataPostRequest(t.baseUrl+"event",JSON.stringify(a))},getLocation:function(e){var n={location:{pin:e}};let o=cdp.userJsonConstruct();Object.assign(o,n);let i=o;console.log("final json",i),cdp.dataPostRequest(t.baseUrl+"event",JSON.stringify(i))},apiTracker:function(e,n,o,i,r){let s={apiTracker:{rescode:e,resmsg:n,reqjson:o,resjson:i,reqname:r}},a=cdp.userJsonConstruct();Object.assign(a,s);let c=a;cdp.dataPostRequest(t.baseUrl+"event",JSON.stringify(c))},pagination:function(e,n){let o={product:{totProduct:e,shown:n}},i=cdp.userJsonConstruct();Object.assign(i,o);let r=i;cdp.dataPostRequest(t.baseUrl+"event",JSON.stringify(r))},sendToApi:function(e){let n=cdp.userJsonConstruct();Object.assign(n,e);let o=n;cdp.dataPostRequest(t.baseUrl+"event",JSON.stringify(o))}},"undefined"!=typeof module&&void 0!==module.exports&&(module.exports=MurmurHash3)}window.cdp=(new cdp_cdp).cdp;